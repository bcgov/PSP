import { SideBarType } from '@/components/common/mapFSM/machineDefinition/types';
import { IMapStateMachineContext } from '@/components/common/mapFSM/MapStateMachineContext';
import {
  emptyPimsBoundaryFeatureCollection,
  emptyPimsLocationFeatureCollection,
  emptyPimsLocationLiteFeatureCollection,
  emptyPmbcFeatureCollection,
  emptySurveyedParcelsFeatures,
} from '@/components/common/mapFSM/models';
import { defaultBounds } from '@/components/maps/constants';
import { PropertyFilterFormModel } from '@/components/maps/leaflet/Control/AdvancedFilter/models';
import { initialEnabledLayers } from '@/components/maps/leaflet/Control/LayersControl/LayersMenuLayout';

export const mapMachineBaseMock: IMapStateMachineContext = {
  requestFlyToBounds: vi.fn(),
  mapFeatureData: {
    pimsLocationFeatures: emptyPimsLocationFeatureCollection,
    pimsLocationLiteFeatures: emptyPimsLocationLiteFeatureCollection,
    pimsBoundaryFeatures: emptyPimsBoundaryFeatureCollection,
    fullyAttributedFeatures: emptyPmbcFeatureCollection,
    surveyedParcelsFeatures: emptySurveyedParcelsFeatures,
  },
  mapSideBarViewState: {
    isCollapsed: false,
    type: SideBarType.NOT_DEFINED,
    isOpen: false,
    isFullWidth: false,
  },
  isShowingSearchBar: false,
  pendingFlyTo: false,
  pendingCenterTo: false,
  pendingFitBounds: false,
  requestedFlyTo: {
    location: null,
    bounds: null,
  },
  requestedCenterTo: {
    location: null,
  },
  requestedFitBounds: defaultBounds,
  mapMarkerSelected: null,
  mapLocationSelected: null,
  mapLocationFeatureDataset: null,
  repositioningFeatureDataset: null,
  repositioningPropertyIndex: null,
  selectingComponentId: null,
  selectedFeatureDataset: null,
  showPopup: false,
  isLoading: false,
  mapSearchCriteria: null,

  filePropertyLocations: [],
  activePimsPropertyIds: [],
  activeLayers: initialEnabledLayers,
  isSelecting: false,
  isRepositioning: false,
  isFiltering: false,
  isShowingMapFilter: false,
  isShowingMapLayers: false,
  isShowingMapSearch: false,
  showDisposed: false,
  showRetired: false,
  mapLayersToRefresh: new Set(),
  advancedSearchCriteria: new PropertyFilterFormModel(),
  isMapVisible: true,
  currentMapBounds: defaultBounds,

  requestFlyToLocation: vi.fn(),
  requestCenterToLocation: vi.fn(),
  processFlyTo: vi.fn(),
  processCenterTo: vi.fn(),
  processFitBounds: vi.fn(),
  openSidebar: vi.fn(),
  closeSidebar: vi.fn(),
  closePopup: vi.fn(),
  mapClick: vi.fn(),
  mapMarkerClick: vi.fn(),
  setMapSearchCriteria: vi.fn(),
  refreshMapProperties: vi.fn(),
  prepareForCreation: vi.fn(),
  startSelection: vi.fn(),
  finishSelection: vi.fn(),
  startReposition: vi.fn(),
  finishReposition: vi.fn(),
  setFilePropertyLocations: vi.fn(),
  setVisiblePimsProperties: vi.fn(),
  toggleMapFilterDisplay: vi.fn(),
  toggleMapLayerControl: vi.fn(),
  toggleMapSearchControl: vi.fn(),
  setShowDisposed: vi.fn(),
  setShowRetired: vi.fn(),
  setMapLayers: vi.fn(),
  setDefaultMapLayers: vi.fn(),
  toggleSidebarDisplay: vi.fn(),
  setFullWidthSideBar: vi.fn(),
  resetMapFilter: vi.fn(),
  setMapLayersToRefresh: vi.fn(),
  setAdvancedSearchCriteria: vi.fn(),
  setCurrentMapBounds: vi.fn(),
};
